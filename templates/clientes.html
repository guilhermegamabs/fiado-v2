{% extends "base.html" %}
{% block content %}
<div class="space-y-4">
    
    <form action="{{ url_for('novo_cliente') }}" method="POST" class="flex gap-2">
        <input type="text" name="nome" placeholder="Novo Cliente..." class="flex-1 p-3 rounded-lg border border-gray-300 focus:outline-none focus:border-blue-500" required>
        <button type="submit" class="bg-blue-600 text-white px-4 rounded-lg font-bold">
            <i class="fa-solid fa-plus"></i>
        </button>
    </form>

    <!-- Botão para exportar todos os clientes -->
    <div class="bg-blue-50 p-3 rounded-lg border border-blue-200 flex items-center justify-between">
        <div class="flex items-center gap-2">
            <i class="fa-solid fa-download text-blue-600"></i>
            <span class="text-sm text-blue-700 font-medium">Exportar Todos</span>
        </div>
        <a href="{{ url_for('exportar_todos_json') }}" class="bg-blue-600 text-white px-3 py-1.5 rounded text-xs font-bold hover:bg-blue-700 transition">
            <i class="fa-solid fa-file-code"></i> JSON
        </a>
    </div>
    
    <h3 class="text-gray-500 font-bold text-sm uppercase mt-4">Lista de Clientes</h3>
    
    <div class="space-y-3">
        {% for cliente in clientes %}
        <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
            <!-- Link clicável para detalhes -->
            <a href="{{ url_for('ver_cliente', cliente_id=cliente.id) }}" class="flex justify-between items-center active:scale-95 transition-transform">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 font-bold text-lg">
                        {{ cliente.nome[0] }}
                    </div>
                    <span class="font-semibold text-gray-700">{{ cliente.nome }}</span>
                </div>
                
                <div class="text-right">
                    {% if cliente.divida_total > 0 %}
                        <span class="block text-red-600 font-bold">R$ {{ "%.2f"|format(cliente.divida_total) }}</span>
                        <span class="text-xs text-red-400">Devendo</span>
                    {% else %}
                        <span class="block text-green-600 font-bold">Em dia</span>
                    {% endif %}
                </div>
            </a>
            
            <!-- Botões de exportação -->
            <div class="mt-3 pt-3 border-t border-gray-100 flex gap-2">
                <a href="{{ url_for('exportar_cliente_json', cliente_id=cliente.id) }}" class="flex-1 bg-gray-50 text-gray-600 text-xs py-2 rounded text-center font-medium hover:bg-gray-100 transition flex items-center justify-center gap-1">
                    <i class="fa-solid fa-file-code"></i> JSON
                </a>
                <a href="{{ url_for('exportar_cliente_csv', cliente_id=cliente.id) }}" class="flex-1 bg-gray-50 text-gray-600 text-xs py-2 rounded text-center font-medium hover:bg-gray-100 transition flex items-center justify-center gap-1">
                    <i class="fa-solid fa-file-csv"></i> CSV
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}